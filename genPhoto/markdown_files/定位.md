### 文档流

- 正常流(`Normal flow`)：在 CSS 中，正常流包括块级盒子的块格式化、内联级盒子的内联格式化，以及块级和内联级盒子的相对(`relative`)和粘性(`sticky`)定位。

- 浮动(`Floats`)：在浮动模型中，盒子首先根据正常流进行布局，然后脱离流并定位，通常在左侧或右侧。内容可以沿着浮动的侧面流动。

- 绝对定位(`Absolute positioning`)：在绝对定位模型中，盒子完全脱离正常流（对后续兄弟元素没有影响），并相对于包含块分配位置。

### 定位

CSS 定位有五种：`static`、`relative`、`absolute`、`fixed` 和 `sticky`, 其中 `static` 是默认值。

- `static` 元素根据文档的正常流位置。`top`、`right`、`bottom`、`left` 和 `z-index` 属性不起作用。这是默认值。

- `relative` 元素根据文档的正常流位置，然后根据 `top`、`right`、`bottom` 和 `left` 的值相对于自身偏移。偏移不会影响其他元素的位置；因此，页面布局中给定的元素空间与 `position` 为 `static` 时相同。

- `absolute` 元素从正常文档流中移除，并且页面布局中不为元素创建空间。元素相对于其最近的已定位祖先（如果有的话）或初始包含块进行定位。其最终位置由 `top`、`right`、`bottom` 和 `left` 的值确定。

- `fixed` 元素从正常文档流中移除，并且页面布局中不为元素创建空间。元素相对于其初始包含块进行定位，对于视觉媒体，初始包含块是视口。其最终位置由 `top`、`right`、`bottom` 和 `left` 的值确定。

- `sticky` 元素根据文档的正常流位置，然后根据 `top`、`right`、`bottom` 和 `left` 的值相对于其最近的滚动祖先和包含块（最近的块级祖先），包括表格相关元素进行偏移。偏移不会影响其他元素的位置。

### 举例

- `relative`

```html
<div class="box" id="one">One</div>
<div class="box" id="two">Two</div>
<div class="box" id="three">Three</div>
<div class="box" id="four">Four</div>
```

```css
* {
  box-sizing: border-box;
}

.box {
  display: inline-block;
  width: 100px;
  height: 100px;
  background: red;
  color: white;
}

#two {
  position: relative;
  top: 20px;
  left: 20px;
  background: blue;
}
```

![state](https://libra-blog.oss-cn-beijing.aliyuncs.com/src/pos1.png)

- `absolute`

```html
<h1>Absolute positioning</h1>

<p>
  I am a basic block level element. My adjacent block level elements sit on new
  lines below me.
</p>

<p class="positioned">
  By default we span 100% of the width of our parent element, and we are as tall
  as our child content. Our total width and height is our content + padding +
  border width/height.
</p>

<p>
  We are separated by our margins. Because of margin collapsing, we are
  separated by the width of one of our margins, not both.
</p>

<p>
  inline elements <span>like this one</span> and <span>this one</span> sit on
  the same line as one another, and adjacent text nodes, if there is space on
  the same line. Overflowing inline elements
  <span>wrap onto a new line if possible — like this one containing text</span>,
</p>
```

```css
* {
  box-sizing: border-box;
}

body {
  width: 500px;
  margin: 0 auto;
}

p {
  background: aqua;
  border: 3px solid blue;
  padding: 10px;
  margin: 10px;
}

span {
  background: red;
  border: 1px solid black;
}

.positioned {
  position: absolute;
  background: yellow;
  top: 30px;
  left: 30px;
}
```

![state](https://libra-blog.oss-cn-beijing.aliyuncs.com/src/pos2.png)

- `fixed`

```html
<div class="outer">
  <p>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam congue tortor
    eget pulvinar lobortis. Vestibulum ante ipsum primis in faucibus orci luctus
    et ultrices posuere cubilia Curae; Nam ac dolor augue. Pellentesque mi mi,
    laoreet et dolor sit amet, ultrices varius risus. Nam vitae iaculis elit.
    Aliquam mollis interdum libero. Sed sodales placerat egestas. Vestibulum ut
    arcu aliquam purus viverra dictum vel sit amet mi. Duis nisl mauris, aliquam
    sit amet luctus eget, dapibus in enim. Sed velit augue, pretium a sem
    aliquam, congue porttitor tortor. Sed tempor nisl a lorem consequat, id
    maximus erat aliquet. Sed sagittis porta libero sed condimentum. Aliquam
    finibus lectus nec ante congue rutrum. Curabitur quam quam, accumsan id
    ultrices ultrices, tempor et tellus.
  </p>
  <p>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam congue tortor
    eget pulvinar lobortis. Vestibulum ante ipsum primis in faucibus orci luctus
    et ultrices posuere cubilia Curae; Nam ac dolor augue. Pellentesque mi mi,
    laoreet et dolor sit amet, ultrices varius risus. Nam vitae iaculis elit.
    Aliquam mollis interdum libero. Sed sodales placerat egestas. Vestibulum ut
    arcu aliquam purus viverra dictum vel sit amet mi. Duis nisl mauris, aliquam
    sit amet luctus eget, dapibus in enim. Sed velit augue, pretium a sem
    aliquam, congue porttitor tortor. Sed tempor nisl a lorem consequat, id
    maximus erat aliquet. Sed sagittis porta libero sed condimentum. Aliquam
    finibus lectus nec ante congue rutrum. Curabitur quam quam, accumsan id
    ultrices ultrices, tempor et tellus.
  </p>
  <div class="box" id="one">One</div>
</div>
```

```css
* {
  box-sizing: border-box;
}

.box {
  width: 100px;
  height: 100px;
  background: red;
  color: white;
}

#one {
  position: fixed;
  top: 80px;
  left: 10px;
  background: blue;
}

.outer {
  width: 500px;
  height: 300px;
  overflow: scroll;
  padding-left: 150px;
}
```

![state](https://libra-blog.oss-cn-beijing.aliyuncs.com/src/pos3.png)

- `sticky`

```css
/* 以下 CSS 规则将 id 为 one 的元素定位，直到视口滚动到元素距离顶部 10px 的位置。超过该阈值后，元素将固定在距离顶部 10px 的位置。*/
#one {
  position: sticky;
  top: 10px;
}
```

```html
<dl>
  <div>
    <dt>A</dt>
    <dd>Andrew W.K.</dd>
    <dd>Apparat</dd>
    <dd>Arcade Fire</dd>
    <dd>At The Drive-In</dd>
    <dd>Aziz Ansari</dd>
  </div>
  <div>
    <dt>C</dt>
    <dd>Chromeo</dd>
    <dd>Common</dd>
    <dd>Converge</dd>
    <dd>Crystal Castles</dd>
    <dd>Cursive</dd>
  </div>
  <div>
    <dt>E</dt>
    <dd>Explosions In The Sky</dd>
  </div>
  <div>
    <dt>T</dt>
    <dd>Ted Leo &amp; The Pharmacists</dd>
    <dd>T-Pain</dd>
    <dd>Thrice</dd>
    <dd>TV On The Radio</dd>
    <dd>Two Gallants</dd>
  </div>
</dl>
```

```css
* {
  box-sizing: border-box;
}

dl > div {
  background: #fff;
  padding: 24px 0 0 0;
}

dt {
  background: #b8c1c8;
  border-bottom: 1px solid #989ea4;
  border-top: 1px solid #717d85;
  color: #fff;
  font: bold 18px/21px Helvetica, Arial, sans-serif;
  margin: 0;
  padding: 2px 0 0 12px;
  position: -webkit-sticky;
  position: sticky;
  top: -1px;
}

dd {
  font: bold 20px/45px Helvetica, Arial, sans-serif;
  margin: 0;
  padding: 0 0 0 12px;
  white-space: nowrap;
}

dd + dd {
  border-top: 1px solid #ccc;
}
```

![state](https://libra-blog.oss-cn-beijing.aliyuncs.com/src/pos4.png)
