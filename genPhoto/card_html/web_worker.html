<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Web Worker è¯¦è§£ - æ¸…æ–°é£æ ¼</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg-light: #f8fafc;
        --bg-white: #ffffff;
        --text-dark: #1e293b;
        --text-gray: #64748b;
        --text-light: #94a3b8;
        --accent-blue: #3b82f6;
        --accent-cyan: #06b6d4;
        --accent-green: #10b981;
        --accent-purple: #8b5cf6;
        --accent-pink: #ec4899;
        --accent-orange: #f97316;
        --accent-yellow: #eab308;
        --gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --gradient-2: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        --gradient-3: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        --gradient-4: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        --gradient-5: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        --shadow-soft: 0 4px 20px rgba(0, 0, 0, 0.08);
        --shadow-card: 0 10px 40px rgba(0, 0, 0, 0.1);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        margin: 0;
        padding: 50px;
        background: linear-gradient(
          135deg,
          #e0e7ff 0%,
          #fce7f3 50%,
          #dbeafe 100%
        );
        font-family: "Nunito", sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 60px;
        min-height: 100vh;
      }

      .card {
        width: 778px;
        height: 1340px;
        background: var(--bg-white);
        border-radius: 32px;
        position: relative;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        padding: 45px;
        box-shadow: var(--shadow-card);
      }

      /* Decorative blobs */
      .blob {
        position: absolute;
        border-radius: 50%;
        filter: blur(60px);
        opacity: 0.4;
        z-index: 0;
      }

      .blob-1 {
        width: 300px;
        height: 300px;
        background: linear-gradient(135deg, #a78bfa, #818cf8);
        top: -80px;
        right: -80px;
      }

      .blob-2 {
        width: 250px;
        height: 250px;
        background: linear-gradient(135deg, #34d399, #6ee7b7);
        bottom: -60px;
        left: -60px;
      }

      .blob-3 {
        width: 200px;
        height: 200px;
        background: linear-gradient(135deg, #f472b6, #fb7185);
        top: 50%;
        right: -50px;
      }

      /* Header */
      .header {
        position: relative;
        z-index: 10;
        text-align: center;
        margin-bottom: 30px;
      }

      .badge {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 20px;
        background: var(--gradient-3);
        border-radius: 100px;
        font-size: 12px;
        font-weight: 700;
        color: white;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 20px;
        box-shadow: 0 4px 15px rgba(79, 172, 254, 0.4);
      }

      .title {
        font-size: 42px;
        font-weight: 800;
        color: var(--text-dark);
        line-height: 1.2;
        margin-bottom: 12px;
      }

      .title .highlight {
        background: var(--gradient-1);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .subtitle {
        font-size: 16px;
        color: var(--text-gray);
        font-weight: 500;
      }

      /* Section */
      .section {
        position: relative;
        z-index: 10;
        margin-bottom: 20px;
      }

      .section-title {
        font-size: 18px;
        font-weight: 700;
        color: var(--text-dark);
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .section-icon {
        width: 32px;
        height: 32px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        color: white;
      }

      .section-icon.blue {
        background: var(--gradient-3);
      }

      .section-icon.purple {
        background: var(--gradient-1);
      }

      .section-icon.green {
        background: var(--gradient-4);
      }

      .section-icon.pink {
        background: var(--gradient-2);
      }

      .section-icon.orange {
        background: var(--gradient-5);
      }

      /* Panel */
      .panel {
        background: var(--bg-light);
        border-radius: 16px;
        padding: 20px;
        margin-bottom: 15px;
        border: 1px solid rgba(0, 0, 0, 0.05);
      }

      .panel.gradient {
        background: linear-gradient(
          135deg,
          rgba(99, 102, 241, 0.08) 0%,
          rgba(168, 85, 247, 0.08) 100%
        );
        border: 1px solid rgba(99, 102, 241, 0.15);
      }

      .panel.success {
        background: linear-gradient(
          135deg,
          rgba(16, 185, 129, 0.08) 0%,
          rgba(52, 211, 153, 0.08) 100%
        );
        border: 1px solid rgba(16, 185, 129, 0.15);
      }

      .panel.warning {
        background: linear-gradient(
          135deg,
          rgba(245, 158, 11, 0.08) 0%,
          rgba(251, 191, 36, 0.08) 100%
        );
        border: 1px solid rgba(245, 158, 11, 0.15);
      }

      /* Code Block */
      .code-block {
        background: #1e293b;
        border-radius: 12px;
        padding: 18px;
        font-family: "JetBrains Mono", monospace;
        font-size: 13px;
        line-height: 1.6;
        color: #e2e8f0;
        position: relative;
        overflow: hidden;
        margin: 12px 0;
      }

      .code-block::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: var(--gradient-3);
      }

      .code-block pre {
        margin: 0;
        white-space: pre-wrap;
      }

      .code-label {
        position: absolute;
        top: 8px;
        right: 12px;
        font-size: 10px;
        font-weight: 600;
        color: #94a3b8;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      /* Syntax */
      .s-blue {
        color: #60a5fa;
      }

      .s-green {
        color: #4ade80;
      }

      .s-purple {
        color: #c084fc;
      }

      .s-orange {
        color: #fb923c;
      }

      .s-pink {
        color: #f472b6;
      }

      .s-gray {
        color: #64748b;
      }

      .s-yellow {
        color: #fbbf24;
      }

      /* Feature List */
      .feature-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .feature-item {
        display: flex;
        align-items: flex-start;
        gap: 12px;
        font-size: 15px;
        color: var(--text-dark);
        line-height: 1.5;
      }

      .feature-icon {
        width: 24px;
        height: 24px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        flex-shrink: 0;
        color: white;
      }

      .feature-icon.check {
        background: var(--accent-green);
      }

      .feature-icon.cross {
        background: var(--accent-pink);
      }

      .feature-icon.dot {
        background: var(--accent-blue);
      }

      .feature-icon.warn {
        background: var(--accent-orange);
      }

      /* Grid */
      .grid-2 {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
      }

      /* Type Card */
      .type-card {
        background: white;
        border-radius: 16px;
        padding: 20px;
        box-shadow: var(--shadow-soft);
        border: 1px solid rgba(0, 0, 0, 0.05);
      }

      .type-card .type-icon {
        width: 44px;
        height: 44px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        margin-bottom: 12px;
        color: white;
      }

      .type-card .type-name {
        font-size: 16px;
        font-weight: 700;
        color: var(--text-dark);
        margin-bottom: 8px;
      }

      .type-card .type-desc {
        font-size: 13px;
        color: var(--text-gray);
        line-height: 1.5;
      }

      /* Flow Diagram */
      .flow-diagram {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 15px;
        padding: 25px;
        background: linear-gradient(
          135deg,
          rgba(99, 102, 241, 0.05) 0%,
          rgba(236, 72, 153, 0.05) 100%
        );
        border-radius: 16px;
        margin: 15px 0;
      }

      .flow-box {
        background: white;
        border-radius: 12px;
        padding: 15px 22px;
        text-align: center;
        font-size: 14px;
        font-weight: 700;
        box-shadow: var(--shadow-soft);
      }

      .flow-box.main {
        color: #8b5cf6;
        border: 2px solid #8b5cf6;
      }

      .flow-box.worker {
        color: #10b981;
        border: 2px solid #10b981;
      }

      .flow-arrow {
        font-size: 24px;
        color: var(--accent-blue);
      }

      .flow-label {
        font-size: 11px;
        color: var(--text-gray);
        text-align: center;
      }

      /* Table */
      .data-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 13px;
      }

      .data-table th {
        text-align: left;
        padding: 12px 15px;
        background: linear-gradient(
          135deg,
          rgba(59, 130, 246, 0.1) 0%,
          rgba(139, 92, 246, 0.1) 100%
        );
        color: var(--accent-blue);
        font-weight: 700;
        border-radius: 8px 8px 0 0;
      }

      .data-table td {
        padding: 12px 15px;
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        color: var(--text-dark);
      }

      .data-table tr:last-child td {
        border-bottom: none;
      }

      /* Tip Box */
      .tip-box {
        background: linear-gradient(
          135deg,
          rgba(59, 130, 246, 0.08) 0%,
          rgba(6, 182, 212, 0.08) 100%
        );
        border: 1px solid rgba(59, 130, 246, 0.2);
        border-radius: 12px;
        padding: 15px 18px;
        font-size: 14px;
        color: var(--text-dark);
        display: flex;
        align-items: flex-start;
        gap: 12px;
      }

      .tip-box .tip-icon {
        font-size: 18px;
        flex-shrink: 0;
      }

      .tip-box.warning {
        background: linear-gradient(
          135deg,
          rgba(245, 158, 11, 0.08) 0%,
          rgba(251, 191, 36, 0.08) 100%
        );
        border-color: rgba(245, 158, 11, 0.2);
      }

      /* Footer */
      .footer {
        margin-top: auto;
        padding-top: 20px;
        border-top: 1px solid rgba(0, 0, 0, 0.08);
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: relative;
        z-index: 10;
      }

      .footer-num {
        font-size: 14px;
        font-weight: 700;
        color: var(--text-light);
      }

      .footer-tag {
        font-size: 12px;
        font-weight: 600;
        color: var(--accent-purple);
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      /* Small inline code */
      code {
        background: rgba(99, 102, 241, 0.1);
        color: var(--accent-purple);
        padding: 2px 8px;
        border-radius: 6px;
        font-family: "JetBrains Mono", monospace;
        font-size: 13px;
      }
    </style>
  </head>

  <body>
    <!-- CARD 1: ä»€ä¹ˆæ˜¯ Web Worker -->
    <div class="card">
      <div class="blob blob-1"></div>
      <div class="blob blob-2"></div>

      <div class="header">
        <div class="badge">âš¡ HTML5 å¤šçº¿ç¨‹</div>
        <h1 class="title">Web <span class="highlight">Worker</span></h1>
        <p class="subtitle">åå°è¿è¡Œè„šæœ¬ Â· é¿å…é˜»å¡ä¸»çº¿ç¨‹</p>
      </div>

      <div class="section">
        <div class="section-title">
          <span class="section-icon blue">ğŸ’¡</span>
          ä»€ä¹ˆæ˜¯ Web Worker
        </div>
        <div class="panel gradient">
          <p style="color: var(--text-dark); font-size: 15px; line-height: 1.7">
            Web Worker æ˜¯ HTML5 å¼•å…¥çš„æœºåˆ¶ï¼Œå…è®¸ JavaScript åœ¨<strong
              style="color: var(--accent-purple)"
              >ç‹¬ç«‹çš„åå°çº¿ç¨‹</strong
            >ä¸­è¿è¡Œè„šæœ¬ï¼Œä»è€Œé¿å…é˜»å¡ä¸»çº¿ç¨‹ã€‚é€‚ç”¨äºè®¡ç®—å¯†é›†å‹ä»»åŠ¡ã€‚
          </p>
        </div>
      </div>

      <div class="section">
        <div class="section-title">
          <span class="section-icon purple">ğŸ¯</span>
          ä¸ºä»€ä¹ˆéœ€è¦ Web Worker
        </div>
        <div class="feature-list">
          <div class="feature-item">
            <span class="feature-icon dot">â—</span>
            <span><strong>å¤æ‚è®¡ç®—</strong> - å¤§æ•°æ®é‡æ’åºã€åŠ å¯†è§£å¯†è¿ç®—</span>
          </div>
          <div class="feature-item">
            <span class="feature-icon dot">â—</span>
            <span><strong>å¤§æ–‡ä»¶å¤„ç†</strong> - æ–‡ä»¶è¯»å–ã€å›¾ç‰‡å¤„ç†</span>
          </div>
          <div class="feature-item">
            <span class="feature-icon dot">â—</span>
            <span><strong>æ•°æ®è½¬æ¢</strong> - JSON è§£æå¤§å‹æ•°æ®</span>
          </div>
          <div class="feature-item">
            <span class="feature-icon dot">â—</span>
            <span><strong>å®æ—¶å¤„ç†</strong> - éŸ³è§†é¢‘ç¼–è§£ç </span>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">
          <span class="section-icon green">ğŸ“¦</span>
          Worker ç±»å‹
        </div>
        <div class="grid-2">
          <div class="type-card">
            <div class="type-icon" style="background: var(--gradient-1)">
              ğŸ‘¤
            </div>
            <div class="type-name">Dedicated Worker</div>
            <div class="type-desc">ä¸“ç”¨ Workerï¼Œä¸åˆ›å»ºå®ƒçš„é¡µé¢ä¸€ä¸€å¯¹åº”</div>
            <div
              class="code-block"
              style="margin-top: 12px; padding: 12px; font-size: 12px"
            >
              <pre><span class="s-purple">const</span> w = <span class="s-blue">new Worker</span>(<span class="s-green">'worker.js'</span>);</pre>
            </div>
          </div>
          <div class="type-card">
            <div class="type-icon" style="background: var(--gradient-4)">
              ğŸ‘¥
            </div>
            <div class="type-name">Shared Worker</div>
            <div class="type-desc">å…±äº« Workerï¼Œå¯è¢«å¤šä¸ªé¡µé¢å…±äº«</div>
            <div
              class="code-block"
              style="margin-top: 12px; padding: 12px; font-size: 12px"
            >
              <pre><span class="s-purple">const</span> sw = <span class="s-blue">new SharedWorker</span>(<span class="s-green">'sw.js'</span>);</pre>
            </div>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">
          <span class="section-icon pink">ğŸ”„</span>
          é€šä¿¡æµç¨‹
        </div>
        <div class="flow-diagram">
          <div class="flow-box main">Main Thread</div>
          <div style="text-align: center">
            <div class="flow-arrow">â‡„</div>
            <div class="flow-label">postMessage<br />onmessage</div>
          </div>
          <div class="flow-box worker">Worker Thread</div>
        </div>
      </div>

      <div class="footer">
        <span class="footer-num">01 / 06</span>
        <span class="footer-tag">Web Worker Basics</span>
      </div>
    </div>

    <!-- CARD 2: åŸºæœ¬ç”¨æ³• -->
    <div class="card">
      <div
        class="blob blob-1"
        style="background: linear-gradient(135deg, #34d399, #6ee7b7)"
      ></div>
      <div
        class="blob blob-2"
        style="background: linear-gradient(135deg, #818cf8, #a78bfa)"
      ></div>

      <div class="header">
        <div class="badge" style="background: var(--gradient-4)">
          ğŸ“ Basic Usage
        </div>
        <h1 class="title">åŸºæœ¬<span class="highlight">ç”¨æ³•</span></h1>
        <p class="subtitle">åˆ›å»º Worker Â· å‘é€æ¶ˆæ¯ Â· æ¥æ”¶ç»“æœ</p>
      </div>

      <div class="section">
        <div class="section-title">
          <span class="section-icon blue">ğŸ“„</span>
          ä¸»çº¿ç¨‹ main.js
        </div>
        <div class="code-block">
          <span class="code-label">Main Thread</span>
          <pre><span class="s-gray">// åˆ›å»º Worker</span>
<span class="s-purple">const</span> worker = <span class="s-blue">new Worker</span>(<span class="s-green">'worker.js'</span>);

<span class="s-gray">// å‘é€æ¶ˆæ¯ç»™ Worker</span>
worker.<span class="s-blue">postMessage</span>({ 
  type: <span class="s-green">'calculate'</span>, 
  data: [1, 2, 3, 4, 5] 
});

<span class="s-gray">// æ¥æ”¶ Worker è¿”å›çš„æ¶ˆæ¯</span>
worker.<span class="s-orange">onmessage</span> = <span class="s-purple">function</span>(event) {
  console.log(<span class="s-green">'æ”¶åˆ°ç»“æœ:'</span>, event.data);
};

<span class="s-gray">// ç›‘å¬é”™è¯¯</span>
worker.<span class="s-pink">onerror</span> = <span class="s-purple">function</span>(error) {
  console.error(<span class="s-green">'Worker é”™è¯¯:'</span>, error.message);
};

<span class="s-gray">// ç»ˆæ­¢ Worker</span>
worker.<span class="s-pink">terminate</span>();</pre>
        </div>
      </div>

      <div class="section">
        <div class="section-title">
          <span class="section-icon green">âš™ï¸</span>
          Worker è„šæœ¬ worker.js
        </div>
        <div class="code-block" style="background: #0f172a">
          <span class="code-label">Worker</span>
          <pre><span class="s-gray">// ç›‘å¬ä¸»çº¿ç¨‹å‘æ¥çš„æ¶ˆæ¯</span>
<span class="s-blue">self</span>.<span class="s-orange">onmessage</span> = <span class="s-purple">function</span>(event) {
  <span class="s-purple">const</span> { type, data } = event.data;
  
  <span class="s-purple">if</span> (type === <span class="s-green">'calculate'</span>) {
    <span class="s-gray">// æ‰§è¡Œè€—æ—¶è®¡ç®—</span>
    <span class="s-purple">const</span> result = data.<span class="s-blue">reduce</span>((sum, n) => sum + n, 0);
    
    <span class="s-gray">// è¿”å›ç»“æœç»™ä¸»çº¿ç¨‹</span>
    <span class="s-blue">self</span>.<span class="s-blue">postMessage</span>({ type: <span class="s-green">'result'</span>, result });
  }
};

<span class="s-gray">// ä¸»åŠ¨å…³é—­ Worker</span>
<span class="s-blue">self</span>.<span class="s-pink">close</span>();</pre>
        </div>
      </div>

      <div class="footer">
        <span class="footer-num">02 / 06</span>
        <span class="footer-tag">Main & Worker Communication</span>
      </div>
    </div>

    <!-- CARD 3: æ•°æ®ä¼ é€’æ–¹å¼ -->
    <div class="card">
      <div
        class="blob blob-1"
        style="background: linear-gradient(135deg, #f472b6, #fb7185)"
      ></div>
      <div
        class="blob blob-2"
        style="background: linear-gradient(135deg, #60a5fa, #3b82f6)"
      ></div>

      <div class="header">
        <div class="badge" style="background: var(--gradient-2)">
          ğŸ“¤ Data Transfer
        </div>
        <h1 class="title">æ•°æ®<span class="highlight">ä¼ é€’</span></h1>
        <p class="subtitle">ç»“æ„åŒ–å…‹éš† Â· å¯è½¬ç§»å¯¹è±¡ Â· å…±äº«å†…å­˜</p>
      </div>

      <div class="section">
        <div class="section-title">
          <span class="section-icon blue">1ï¸âƒ£</span>
          ç»“æ„åŒ–å…‹éš† Structured Clone
        </div>
        <div class="panel gradient">
          <p
            style="
              color: var(--text-dark);
              font-size: 14px;
              line-height: 1.6;
              margin-bottom: 12px;
            "
          >
            é»˜è®¤æƒ…å†µä¸‹ï¼Œæ•°æ®é€šè¿‡<strong style="color: var(--accent-purple)"
              >ç»“æ„åŒ–å…‹éš†ç®—æ³•</strong
            >å¤åˆ¶ä¼ é€’ï¼Œå‘é€çš„æ˜¯æ•°æ®çš„å‰¯æœ¬
          </p>
          <div class="code-block" style="margin: 0">
            <pre><span class="s-purple">const</span> data = { name: <span class="s-green">'test'</span>, values: [1, 2, 3] };
worker.<span class="s-blue">postMessage</span>(data);  <span class="s-gray">// data è¢«å…‹éš†åå‘é€</span>
data.name = <span class="s-green">'modified'</span>;  <span class="s-gray">// ä¸å½±å“ Worker æ”¶åˆ°çš„æ•°æ®</span></pre>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">
          <span class="section-icon green">2ï¸âƒ£</span>
          å¯è½¬ç§»å¯¹è±¡ Transferable Objects
        </div>
        <div class="panel success">
          <p
            style="
              color: var(--text-dark);
              font-size: 14px;
              line-height: 1.6;
              margin-bottom: 12px;
            "
          >
            å¯¹äºå¤§å‹äºŒè¿›åˆ¶æ•°æ®ï¼Œä½¿ç”¨<strong style="color: var(--accent-green)"
              >æ‰€æœ‰æƒè½¬ç§»</strong
            >æ–¹å¼ï¼Œæ€§èƒ½æ›´é«˜
          </p>
          <div class="code-block" style="margin: 0">
            <pre><span class="s-purple">const</span> buffer = <span class="s-blue">new ArrayBuffer</span>(1024 * 1024); <span class="s-gray">// 1MB</span>

<span class="s-gray">// è½¬ç§» buffer æ‰€æœ‰æƒç»™ Worker</span>
worker.<span class="s-blue">postMessage</span>(buffer, <span class="s-orange">[buffer]</span>);

<span class="s-gray">// è½¬ç§»åï¼Œä¸»çº¿ç¨‹çš„ buffer.byteLength å˜ä¸º 0</span>
console.log(buffer.byteLength); <span class="s-gray">// 0</span></pre>
          </div>
          <div class="feature-list" style="margin-top: 12px">
            <div class="feature-item">
              <span class="feature-icon check">âœ“</span> ArrayBuffer /
              MessagePort / ImageBitmap
            </div>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">
          <span class="section-icon orange">3ï¸âƒ£</span>
          å…±äº«å†…å­˜ SharedArrayBuffer
        </div>
        <div class="panel warning">
          <p
            style="
              color: var(--text-dark);
              font-size: 14px;
              line-height: 1.6;
              margin-bottom: 12px;
            "
          >
            å®ç°ä¸»çº¿ç¨‹å’Œ Worker ä¹‹é—´çš„<strong
              style="color: var(--accent-orange)"
              >å†…å­˜å…±äº«</strong
            >
          </p>
          <div class="code-block" style="margin: 0">
            <pre><span class="s-gray">// ä¸»çº¿ç¨‹</span>
<span class="s-purple">const</span> shared = <span class="s-blue">new SharedArrayBuffer</span>(1024);
<span class="s-purple">const</span> arr = <span class="s-blue">new Int32Array</span>(shared);
worker.<span class="s-blue">postMessage</span>({ buffer: shared });

<span class="s-gray">// Worker ä¸­ä½¿ç”¨ Atomics è¿›è¡ŒåŸå­æ“ä½œ</span>
<span class="s-blue">Atomics</span>.<span class="s-blue">add</span>(sharedArray, 0, 10);</pre>
          </div>
        </div>
      </div>

      <div class="tip-box warning">
        <span class="tip-icon">âš ï¸</span>
        <span>ä½¿ç”¨ SharedArrayBuffer éœ€è¦é¡µé¢å¯ç”¨ COOP å’Œ COEP å“åº”å¤´</span>
      </div>

      <div class="footer">
        <span class="footer-num">03 / 06</span>
        <span class="footer-tag">Data Transfer Methods</span>
      </div>
    </div>

    <!-- CARD 4: å¯ç”¨ API -->
    <div class="card">
      <div
        class="blob blob-1"
        style="background: linear-gradient(135deg, #fbbf24, #f59e0b)"
      ></div>
      <div
        class="blob blob-2"
        style="background: linear-gradient(135deg, #34d399, #10b981)"
      ></div>

      <div class="header">
        <div class="badge" style="background: var(--gradient-5)">
          ğŸ”§ Worker API
        </div>
        <h1 class="title">å¯ç”¨<span class="highlight">API</span></h1>
        <p class="subtitle">Worker è¿è¡Œåœ¨ç‹¬ç«‹å…¨å±€ä¸Šä¸‹æ–‡ WorkerGlobalScope</p>
      </div>

      <div class="section">
        <div class="section-title">
          <span class="section-icon green">âœ…</span>
          å¯ä»¥ä½¿ç”¨çš„ API
        </div>
        <div class="panel success">
          <table class="data-table">
            <tr>
              <th>API</th>
              <th>è¯´æ˜</th>
            </tr>
            <tr>
              <td><code>fetch() / XMLHttpRequest</code></td>
              <td>ç½‘ç»œè¯·æ±‚</td>
            </tr>
            <tr>
              <td><code>setTimeout() / setInterval()</code></td>
              <td>å®šæ—¶å™¨</td>
            </tr>
            <tr>
              <td><code>Promise / async-await</code></td>
              <td>å¼‚æ­¥æ“ä½œ</td>
            </tr>
            <tr>
              <td><code>WebSocket</code></td>
              <td>WebSocket è¿æ¥</td>
            </tr>
            <tr>
              <td><code>IndexedDB</code></td>
              <td>æœ¬åœ°æ•°æ®åº“</td>
            </tr>
            <tr>
              <td><code>crypto</code></td>
              <td>åŠ å¯† API</td>
            </tr>
            <tr>
              <td><code>importScripts()</code></td>
              <td>å¯¼å…¥å¤–éƒ¨è„šæœ¬</td>
            </tr>
            <tr>
              <td><code>Blob / FileReader</code></td>
              <td>æ–‡ä»¶å¤„ç†</td>
            </tr>
          </table>
        </div>
      </div>

      <div class="section">
        <div class="section-title">
          <span class="section-icon pink">âŒ</span>
          ä¸èƒ½ä½¿ç”¨çš„ API
        </div>
        <div
          class="panel"
          style="
            background: linear-gradient(
              135deg,
              rgba(236, 72, 153, 0.08) 0%,
              rgba(244, 114, 182, 0.08) 100%
            );
            border: 1px solid rgba(236, 72, 153, 0.15);
          "
        >
          <table class="data-table">
            <tr>
              <th
                style="
                  background: linear-gradient(
                    135deg,
                    rgba(236, 72, 153, 0.1) 0%,
                    rgba(244, 114, 182, 0.1) 100%
                  );
                  color: var(--accent-pink);
                "
              >
                API
              </th>
              <th
                style="
                  background: linear-gradient(
                    135deg,
                    rgba(236, 72, 153, 0.1) 0%,
                    rgba(244, 114, 182, 0.1) 100%
                  );
                  color: var(--accent-pink);
                "
              >
                è¯´æ˜
              </th>
            </tr>
            <tr>
              <td>
                <code
                  style="
                    background: rgba(236, 72, 153, 0.1);
                    color: var(--accent-pink);
                  "
                  >document</code
                >
              </td>
              <td>DOM å¯¹è±¡</td>
            </tr>
            <tr>
              <td>
                <code
                  style="
                    background: rgba(236, 72, 153, 0.1);
                    color: var(--accent-pink);
                  "
                  >window</code
                >
              </td>
              <td>å…¨å±€ window å¯¹è±¡</td>
            </tr>
            <tr>
              <td>
                <code
                  style="
                    background: rgba(236, 72, 153, 0.1);
                    color: var(--accent-pink);
                  "
                  >localStorage / sessionStorage</code
                >
              </td>
              <td>åŒæ­¥å­˜å‚¨</td>
            </tr>
            <tr>
              <td>
                <code
                  style="
                    background: rgba(236, 72, 153, 0.1);
                    color: var(--accent-pink);
                  "
                  >alert() / confirm()</code
                >
              </td>
              <td>å¼¹çª—æ–¹æ³•</td>
            </tr>
          </table>
        </div>
      </div>

      <div class="tip-box">
        <span class="tip-icon">ğŸ’¡</span>
        <span
          ><strong>æ ¸å¿ƒé™åˆ¶:</strong> Worker æ— æ³•è®¿é—® DOMï¼Œæ‰€æœ‰ UI æ“ä½œå¿…é¡»é€šè¿‡
          postMessage é€šçŸ¥ä¸»çº¿ç¨‹å®Œæˆ</span
        >
      </div>

      <div class="footer">
        <span class="footer-num">04 / 06</span>
        <span class="footer-tag">Available APIs</span>
      </div>
    </div>

    <!-- CARD 5: æœ€ä½³å®è·µ -->
    <div class="card">
      <div class="blob blob-1"></div>
      <div class="blob blob-2"></div>
      <div class="blob blob-3"></div>

      <div class="header">
        <div class="badge" style="background: var(--gradient-1)">
          â­ Best Practices
        </div>
        <h1 class="title">æœ€ä½³<span class="highlight">å®è·µ</span></h1>
        <p class="subtitle">æ³¨æ„äº‹é¡¹ Â· æœ€ä½³å®è·µ Â· æµè§ˆå™¨å…¼å®¹æ€§</p>
      </div>

      <div class="section">
        <div class="section-title">
          <span class="section-icon orange">âš ï¸</span>
          æ³¨æ„äº‹é¡¹
        </div>
        <div class="panel warning">
          <div class="feature-list">
            <div class="feature-item">
              <span class="feature-icon warn">!</span>
              <span
                ><strong>åŒæºé™åˆ¶</strong> - Worker è„šæœ¬å¿…é¡»ä¸ä¸»é¡µé¢åŒæº</span
              >
            </div>
            <div class="feature-item">
              <span class="feature-icon warn">!</span>
              <span
                ><strong>æ–‡ä»¶åè®®</strong> - åœ¨ file:// åè®®ä¸‹ Worker
                å¯èƒ½æ— æ³•æ­£å¸¸å·¥ä½œ</span
              >
            </div>
            <div class="feature-item">
              <span class="feature-icon warn">!</span>
              <span
                ><strong>è„šæœ¬ç±»å‹</strong> - Worker æ¥æ”¶çš„æ˜¯è„šæœ¬
                URLï¼Œä¸æ˜¯æ¨¡å—è·¯å¾„</span
              >
            </div>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">
          <span class="section-icon green">âœ…</span>
          æœ€ä½³å®è·µ
        </div>
        <div class="panel success">
          <div class="feature-list">
            <div class="feature-item">
              <span class="feature-icon check">âœ“</span>
              <span
                ><strong>åˆç†è¯„ä¼°</strong> - ç®€å•ä»»åŠ¡ä¸éœ€è¦
                Workerï¼Œé¿å…è¿‡åº¦è®¾è®¡</span
              >
            </div>
            <div class="feature-item">
              <span class="feature-icon check">âœ“</span>
              <span
                ><strong>å‡å°‘é€šä¿¡</strong> - æ‰¹é‡å‘é€æ•°æ®ï¼Œå‡å°‘ postMessage
                è°ƒç”¨æ¬¡æ•°</span
              >
            </div>
            <div class="feature-item">
              <span class="feature-icon check">âœ“</span>
              <span
                ><strong>Transferable</strong> -
                å¤§å‹äºŒè¿›åˆ¶æ•°æ®ä½¿ç”¨å¯è½¬ç§»å¯¹è±¡</span
              >
            </div>
            <div class="feature-item">
              <span class="feature-icon check">âœ“</span>
              <span
                ><strong>åŠæ—¶ç»ˆæ­¢</strong> - ä»»åŠ¡å®Œæˆåè°ƒç”¨ terminate()
                é‡Šæ”¾èµ„æº</span
              >
            </div>
            <div class="feature-item">
              <span class="feature-icon check">âœ“</span>
              <span
                ><strong>Worker æ± </strong> - é¢‘ç¹åˆ›å»ºå¼€é”€å¤§ï¼Œè€ƒè™‘ä½¿ç”¨ Worker
                æ± å¤ç”¨</span
              >
            </div>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">
          <span class="section-icon blue">ğŸŒ</span>
          æµè§ˆå™¨å…¼å®¹æ€§
        </div>
        <div class="panel gradient">
          <table class="data-table">
            <tr>
              <th>æµè§ˆå™¨</th>
              <th>Dedicated</th>
              <th>Shared</th>
              <th>Module</th>
            </tr>
            <tr>
              <td>Chrome</td>
              <td style="color: var(--accent-green)">âœ“ 4+</td>
              <td style="color: var(--accent-green)">âœ“ 4+</td>
              <td style="color: var(--accent-green)">âœ“ 80+</td>
            </tr>
            <tr>
              <td>Firefox</td>
              <td style="color: var(--accent-green)">âœ“ 3.5+</td>
              <td style="color: var(--accent-green)">âœ“ 29+</td>
              <td style="color: var(--accent-green)">âœ“ 114+</td>
            </tr>
            <tr>
              <td>Safari</td>
              <td style="color: var(--accent-green)">âœ“ 4+</td>
              <td style="color: var(--accent-orange)">âš  éƒ¨åˆ†</td>
              <td style="color: var(--accent-green)">âœ“ 15+</td>
            </tr>
            <tr>
              <td>Edge</td>
              <td style="color: var(--accent-green)">âœ“ 12+</td>
              <td style="color: var(--accent-green)">âœ“ 79+</td>
              <td style="color: var(--accent-green)">âœ“ 80+</td>
            </tr>
          </table>
        </div>
      </div>

      <div class="footer">
        <span class="footer-num">05 / 06</span>
        <span class="footer-tag">Best Practices & Compatibility</span>
      </div>
    </div>

    <!-- CARD 6: Vue 3 ä½¿ç”¨ç¤ºä¾‹ -->
    <div class="card">
      <div
        class="blob blob-1"
        style="background: linear-gradient(135deg, #34d399, #10b981)"
      ></div>
      <div
        class="blob blob-2"
        style="background: linear-gradient(135deg, #818cf8, #6366f1)"
      ></div>
      <div
        class="blob blob-3"
        style="background: linear-gradient(135deg, #f472b6, #ec4899)"
      ></div>

      <div class="header">
        <div
          class="badge"
          style="background: linear-gradient(135deg, #42d392 0%, #647eff 100%)"
        >
          ğŸƒ Vue 3 + Vite
        </div>
        <h1 class="title">Vue <span class="highlight">ä½¿ç”¨ç¤ºä¾‹</span></h1>
        <p class="subtitle">useWorker ç»„åˆå¼å‡½æ•° Â· ç»„ä»¶å°è£…</p>
      </div>

      <div class="section">
        <div class="section-title">
          <span class="section-icon green">ğŸ”§</span>
          useWorker.ts ç»„åˆå¼å‡½æ•°
        </div>
        <div class="code-block" style="font-size: 12px">
          <span class="code-label">Composable</span>
          <pre><span class="s-purple">import</span> { ref, onUnmounted, shallowRef } <span class="s-purple">from</span> <span class="s-green">'vue'</span>;

<span class="s-purple">export function</span> <span class="s-blue">useWorker</span><span class="s-orange">&lt;T, R&gt;</span>(workerFactory: () => Worker) {
  <span class="s-purple">const</span> workerRef = <span class="s-blue">shallowRef</span><span class="s-orange">&lt;Worker | null&gt;</span>(null);
  <span class="s-purple">const</span> result = <span class="s-blue">ref</span><span class="s-orange">&lt;R | null&gt;</span>(null);
  <span class="s-purple">const</span> loading = <span class="s-blue">ref</span>(false);
  <span class="s-purple">const</span> error = <span class="s-blue">ref</span><span class="s-orange">&lt;Error | null&gt;</span>(null);

  <span class="s-purple">const</span> <span class="s-blue">postMessage</span> = (data: T): <span class="s-orange">Promise&lt;R&gt;</span> => {
    <span class="s-purple">return new</span> <span class="s-blue">Promise</span>((resolve, reject) => {
      <span class="s-purple">if</span> (!workerRef.value) {
        workerRef.value = <span class="s-blue">workerFactory</span>();
      }
      loading.value = <span class="s-orange">true</span>;
      workerRef.value.<span class="s-orange">onmessage</span> = (e) => {
        result.value = e.data;
        loading.value = <span class="s-orange">false</span>;
        <span class="s-blue">resolve</span>(e.data);
      };
      workerRef.value.<span class="s-blue">postMessage</span>(data);
    });
  };

  <span class="s-blue">onUnmounted</span>(() => workerRef.value?.<span class="s-pink">terminate</span>());
  <span class="s-purple">return</span> { result, loading, error, postMessage };
}</pre>
        </div>
      </div>

      <div class="section">
        <div class="section-title">
          <span class="section-icon purple">ğŸ“¦</span>
          ç»„ä»¶ä½¿ç”¨ Calculator.vue
        </div>
        <div class="code-block" style="font-size: 12px">
          <span class="code-label">Vue Component</span>
          <pre><span class="s-pink">&lt;script setup lang="ts"&gt;</span>
<span class="s-purple">import</span> { ref } <span class="s-purple">from</span> <span class="s-green">'vue'</span>;
<span class="s-purple">import</span> { useWorker } <span class="s-purple">from</span> <span class="s-green">'./useWorker'</span>;

<span class="s-gray">// Vite ç‰¹å®šè¯­æ³•ï¼šä½¿ç”¨ new URL() + import.meta.url</span>
<span class="s-purple">const</span> { result, loading, postMessage } = <span class="s-blue">useWorker</span><span class="s-orange">&lt;number, number&gt;</span>(
  () => <span class="s-purple">new</span> <span class="s-blue">Worker</span>(
    <span class="s-purple">new</span> <span class="s-blue">URL</span>(<span class="s-green">'./worker.ts'</span>, <span class="s-orange">import.meta.url</span>),
    { type: <span class="s-green">'module'</span> }
  )
);

<span class="s-purple">const</span> inputValue = <span class="s-blue">ref</span>(1000000);
<span class="s-purple">const</span> <span class="s-blue">handleCalculate</span> = <span class="s-purple">async</span> () => {
  <span class="s-purple">const</span> res = <span class="s-purple">await</span> <span class="s-blue">postMessage</span>(inputValue.value);
  console.log(<span class="s-green">'è®¡ç®—ç»“æœ:'</span>, res);
};
<span class="s-pink">&lt;/script&gt;</span>
  
    
    </div>
  </body>
</html>
